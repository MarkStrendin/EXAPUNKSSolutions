;WRITER
; FILE 400 = PRES W (R)
; FILE 401 = SEN W (W)

MAKE
COPY M X

@REP 10
COPY M F
@END

COPY X M
DROP
MAKE

@REP 10
COPY M F
@END

;MAKE A BOT THAT GRABS
;ONE OF EACH NUMBER
;AND THEN GOES TO SWITCH
;THEM
DROP
REPL READER

MAKE
MARK MEMORYLOOP

@REP 10
COPY M F
@END

SEEK -9999

@REP 10
COPY F M
@END

SEEK -9999
JUMP MEMORYLOOP

MARK READER
;GRAB THE FILE
GRAB 400

TEST EOF
FJMP CONTINUE
KILL
MARK CONTINUE

;COPY THE VALUE TO X
;THEN DELETE IT FROM
;THE FILE
COPY F X
SEEK -1
VOID F
DROP

;FIND THE DISK #
SWIZ X 0003 T
ADDI 800 T T
LINK 800
LINK T

;FIND THE FILE #
SWIZ X 0002 T
ADDI 200 T T
GRAB T

;FIND THE SECTOR
SWIZ X 0010 T
SEEK T

;SEND THE DATA
@REP 10
COPY F M
@END

;RETURN
DROP
LINK -1
LINK -1
JUMP WRITER


MARK WRITER
;GRAB THE FILE
GRAB 401

;COPY THE VALUE TO X
;THEN DELETE IT FROM
;THE FILE
COPY F X
SEEK -1
VOID F
DROP

;FIND THE DISK #
SWIZ X 0003 T
ADDI 800 T T
LINK 800
LINK T

;FIND THE FILE #
SWIZ X 0002 T
ADDI 200 T T
GRAB T

;FIND THE SECTOR
SWIZ X 0010 T
SEEK T

;RX THE DATA
@REP 10
COPY M F
@END

;RETURN
DROP
LINK -1
LINK -1
JUMP READER